<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <title>OddGURU - Value Bets com Fundamento</title>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { 
      font-family: 'Segoe UI', Arial, sans-serif; 
      text-align: center; 
      background: linear-gradient(135deg, #0a0a1a, #1a1a2e); 
      color: #0f0; 
      padding: 20px; 
      margin: 0; 
    }
    .title { 
      color: #00ff88; 
      font-size: 2.8em; 
      text-shadow: 0 0 20px #00ff88; 
      margin-bottom: 10px;
    }
    .subtitle { 
      color: #0ff; 
      font-size: 1.2em; 
      margin-bottom: 20px;
    }
    .history-link {
      display: inline-block;
      background: #00ff88;
      color: #000;
      padding: 12px 25px;
      border-radius: 10px;
      text-decoration: none;
      font-weight: bold;
      margin: 15px;
      box-shadow: 0 0 15px #00ff88;
    }
    .history-link:hover { background: #00cc66; }
    .value-bet { 
      background: rgba(0, 255, 136, 0.15); 
      border: 2px solid #00ff88;
      color: #fff; 
      padding: 20px; 
      margin: 20px auto; 
      border-radius: 15px; 
      max-width: 500px;
      box-shadow: 0 0 20px rgba(0, 255, 136, 0.3);
    }
    .match { font-size: 1.4em; font-weight: bold; color: #0ff; }
    .time { color: #ff0; font-size: 0.9em; }
    .odd-edge { font-size: 1.3em; margin: 10px 0; }
    .edge-positive { color: #0f0; font-weight: bold; }
    .why { 
      background: rgba(0, 255, 0, 0.1);
      border-left: 4px solid #0f0;
      padding: 12px;
      margin: 15px 0;
      text-align: left;
      font-size: 1em;
      color: #ccc;
    }
    .suggestion { 
      color: #00ff88; 
      font-size: 1.4em; 
      font-weight: bold; 
      margin-top: 15px;
    }
    .no-bets { color: #aaa; font-size: 1.2em; }
  </style>
</head>
<body>
  <h1 class="title">OddGURU</h1>
  <p class="subtitle">Value Bets com fundamento — Atualizado em tempo real</p>

  <a href="/history.html" class="history-link">VER HISTÓRICO + ROI AO VIVO</a>

  <div id="bets">Carregando value bets...</div>

  <script>
    fetch('/api/smart-bets')
      .then(r => r.json())
      .then(d => {
        const el = document.getElementById('bets');
        el.innerHTML = '';

        if (d.value_bets && d.value_bets.length > 0) {
          d.value_bets.forEach(b => {
            el.innerHTML += `
              <div class="value-bet">
                <div class="match">${b.match}</div>
                <div class="time">${b.status}</div>
                <div class="odd-edge">
                  Odd: <strong>${b.odd_home}</strong> | 
                  Edge: <span class="edge-positive">+${(b.edge*100).toFixed(1)}%</span>
                </div>
                <div class="why">
                  <strong>POR QUÊ ESSA É VALUE BET?</strong><br>
                  ${b.why || "Análise completa do modelo OddGURU"}
                </div>
                <div class="suggestion">${b.suggestion}</div>
              </div>`;
          });
        } else {
          el.innerHTML = '<p class="no-bets">Nenhuma value bet segura no momento. Aguarde as próximas rodadas!</p>';
        }
      })
      .catch(() => {
        document.getElementById('bets').innerHTML = '<p style="color:red">Erro ao carregar as apostas</p>';
      });
  </script>
  <h2>CADASTRAR VALUE BET (TESTE)</h2>
<button onclick="cadastrar()">CADASTRAR SÃO PAULO @1.80</button>
<button onclick="cadastrarCartoes()">CADASTRAR OVER 5.5 CARTÕES</button>

<script>
async function cadastrar() {
  await fetch('/api/add-bet', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
      match: "São Paulo vs Bragantino",
      home_team: "São Paulo",
      away_team: "Bragantino",
      market: "1X2",
      selection: "São Paulo",
      odd: 1.80,
      edge: 0.26,
      why: "8º em casa • Venceu 4 dos últimos 5 • Bragantino perdeu 3 dos últimos 5 fora"
    })
  });
  alert("São Paulo cadastrado!");
}

async function cadastrarCartoes() {
  await fetch('/api/add-bet', {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify({
      match: "São Paulo vs Bragantino",
      market: "cartoes",
      selection: "Over 5.5",
      odd: 2.10,
      edge: 0.38,
      why: "Árbitro João Acácio • Média 6.2 cartões • Histórico: 7,6,8,5,6"
    })
  });
  alert("Over 5.5 cartões cadastrado!");
}
</script>
</body>
</html>
