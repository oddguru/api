<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>OddGURU PRO</title>
  <style>
    body{font-family:'Segoe UI',Arial,sans-serif;background:#0f0f1e;color:#0f0;margin:0;padding:20px;background:linear-gradient(135deg,#0f0f1e,#1a1a2e);}
    .title{font-size:3em;color:#00ff88;text-shadow:0 0 20px #00ff88;text-align:center;margin:20px 0;}
    .subtitle{color:#0ff;text-align:center;font-size:1.3em;margin-bottom:30px;}
    .history-btn{background:#00ff88;color:#000;padding:15px 30px;border-radius:15px;font-weight:bold;text-decoration:none;display:inline-block;margin:20px;box-shadow:0 0 20px #00ff88;}
    .history-btn:hover{background:#00cc66;}
    .value-bet{background:rgba(0,255,136,0.15);border:2px solid #00ff88;border-radius:15px;padding:20px;margin:20px auto;max-width:600px;box-shadow:0 0 20px rgba(0,255,136,0.3);}
    .match{font-size:1.6em;color:#0ff;font-weight:bold;margin-bottom:8px;}
    .mercado{font-size:1.1em;color:#ff0;margin:10px 0;}
    .odd-edge{font-size:1.5em;margin:15px 0;}
    .edge-positive{color:#0f0;font-weight:bold;}
    .why{background:rgba(0,255,0,0.1);border-left:4px solid #0f0;padding:15px;margin:15px 0;text-align:left;color:#ccc;}
    .suggestion{color:#00ff88;font-size:1.6em;font-weight:bold;margin-top:20px;}
    .no-bets{color:#aaa;font-size:1.4em;margin:50px;text-align:center;}
    .footer{margin-top:50px;color:#666;font-size:0.9em;text-align:center;}
    .icon {font-size:1.4em;margin-right:8px;vertical-align:middle;}
  </style>
</head>
<body>
  <h1 class="title">OddGURU PRO</h1>
  <p class="subtitle">Value Bets com fundamento • Todos os mercados • Atualizado em tempo real</p>
  <div style="text-align:center;">
    <a href="/history.html" class="history-btn">VER HISTÓRICO + ROI AO VIVO</a>
  </div>

  <div id="bets">Carregando value bets...</div>

  <div class="footer">© 2025 OddGURU • Todos os direitos reservados</div>

  <script>
    async function loadBets() {
      try {
        const res = await fetch('/api/active-bets');
        const data = await res.json();
        const el = document.getElementById('bets');
        el.innerHTML = '';

        if (!data.active_bets || data.active_bets.length === 0) {
          el.innerHTML = '<p class="no-bets">Nenhuma value bet ativa no momento.<br>Aguarde as próximas rodadas!</p>';
          return;
        }

        const mercadoLabel = {
          "1X2": "VITÓRIA DO TIME DA CASA",
          "cartoes": "TOTAL DE CARTÕES",
          "escanteios": "TOTAL DE ESCANTEIOS",
          "gols": "TOTAL DE GOLS",
          "btts": "AMBAS AS EQUIPES MARCAM",
          "over1.5": "MAIS DE 1.5 GOLS"
        };

        data.active_bets.forEach(b => {
          const isCasa = (b.market === "1X2" && b.selection === b.home_team);
          const mercadoTexto = (b.market === "1X2" && isCasa) ? "VITÓRIA DO TIME DA CASA" : mercadoLabel[b.market] || b.market.toUpperCase();

          // EMOJIS REAIS POR MERCADO — FUNCIONA 100% EM TODOS OS NAVEGADORES
          let icone = "Money Bag";
          if (b.market === "1X2") icone = "Trophy";
          if (b.market === "cartoes") icone = "Yellow Card";
          if (b.market === "escanteios") icone = "Corner Flag";
          if (b.market === "btts") icone = "Handshake";
          if (b.market === "gols" || b.market === "over1.5") icone = "Soccer Ball";

          el.innerHTML += `
            <div class="value-bet">
              <div class="match"><span class="icon">${icone}</span><strong>${b.match}</strong></div>
              <div class="mercado">
                <strong>${mercadoTexto}</strong><br>
                <span style="color:#0ff;font-size:1.3em;font-weight:bold;">${b.selection}</span>
              </div>
              <div class="odd-edge">
                Odd: <strong>${b.odd}</strong> | Edge: <span class="edge-positive">+${(b.edge*100).toFixed(1)}%</span>
              </div>
              <div class="why">
                <strong>POR QUÊ ESSA É VALUE BET?</strong><br>
                ${b.why || "Análise completa do modelo OddGURU"}
              </div>
              <div class="suggestion">APOSTE AGORA!</div>
            </div>`;
        });
      } catch (err) {
        el.innerHTML = '<p style="color:red">Erro ao carregar apostas</p>';
      }
    }

    loadBets();
    setInterval(loadBets, 30000);
  </script>
</body>
</html>
